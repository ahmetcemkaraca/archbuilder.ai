<Window x:Class="ArchBuilder.Desktop.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding WindowTitle}" Height="600" Width="800"
        WindowStartupLocation="CenterScreen">
    
    <Window.Resources>
        <Style x:Key="TabItemStyle" TargetType="TabItem">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
        
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
        </Style>
        
        <Style x:Key="SettingLabelStyle" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="MinWidth" Value="120"/>
        </Style>
        
        <Style x:Key="SettingControlStyle" TargetType="Control">
            <Setter Property="Margin" Value="8,0,0,8"/>
        </Style>
        
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="Margin" Value="4,0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="100"/>
        </Style>
        
        <Style x:Key="PrimaryButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="#007ACC"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </Window.Resources>
    
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Tab Control -->
        <TabControl Grid.Row="0" SelectedIndex="{Binding SelectedTabIndex}">
            
            <!-- General Settings Tab -->
            <TabItem Header="{Binding GeneralTabLabel}" Style="{StaticResource TabItemStyle}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        
                        <!-- API Settings Section -->
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="{Binding ApiSettingsLabel}"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding ApiBaseUrlLabel}"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                    Text="{Binding ApiBaseUrl, UpdateSourceTrigger=PropertyChanged}"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding ApiKeyLabel}"/>
                            <PasswordBox Grid.Row="1" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                        x:Name="ApiKeyBox" PasswordChanged="OnPasswordChanged"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding TimeoutLabel}"/>
                            <TextBox Grid.Row="2" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                    Text="{Binding RequestTimeout, UpdateSourceTrigger=PropertyChanged}"/>
                            
                            <CheckBox Grid.Row="3" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding EnableLoggingLabel}"
                                     IsChecked="{Binding EnableLogging}"/>
                        </Grid>
                        
                        <!-- Regional Settings Section -->
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="{Binding RegionalSettingsLabel}" 
                                  Margin="0,24,0,8"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding LanguageLabel}"/>
                            <ComboBox Grid.Row="0" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     ItemsSource="{Binding AvailableLanguages}"
                                     SelectedItem="{Binding SelectedLanguage}"
                                     DisplayMemberPath="Name" SelectedValuePath="Code"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding RegionLabel}"/>
                            <ComboBox Grid.Row="1" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     ItemsSource="{Binding AvailableRegions}"
                                     SelectedItem="{Binding SelectedRegion}"
                                     DisplayMemberPath="Name" SelectedValuePath="Code"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding BuildingTypeLabel}"/>
                            <ComboBox Grid.Row="2" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     ItemsSource="{Binding AvailableBuildingTypes}"
                                     SelectedItem="{Binding SelectedBuildingType}"
                                     DisplayMemberPath="Name" SelectedValuePath="Code"/>
                        </Grid>
                        
                        <!-- Validation Settings Section -->
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="{Binding ValidationSettingsLabel}" 
                                  Margin="0,24,0,8"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <CheckBox Grid.Row="0" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding EnableGeometricValidationLabel}"
                                     IsChecked="{Binding EnableGeometricValidation}"/>
                            
                            <CheckBox Grid.Row="1" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding EnableCodeValidationLabel}"
                                     IsChecked="{Binding EnableCodeValidation}"/>
                            
                            <CheckBox Grid.Row="2" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding AutoSubmitForReviewLabel}"
                                     IsChecked="{Binding AutoSubmitForReview}"/>
                        </Grid>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- UI Settings Tab -->
            <TabItem Header="{Binding UiTabLabel}" Style="{StaticResource TabItemStyle}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        
                        <!-- Theme Settings Section -->
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="{Binding ThemeSettingsLabel}"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding ThemeLabel}"/>
                            <ComboBox Grid.Row="0" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     ItemsSource="{Binding AvailableThemes}"
                                     SelectedItem="{Binding SelectedTheme}"
                                     DisplayMemberPath="Name" SelectedValuePath="Code"/>
                            
                            <CheckBox Grid.Row="1" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding UseSystemThemeLabel}"
                                     IsChecked="{Binding UseSystemTheme}"/>
                            
                            <CheckBox Grid.Row="2" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding EnableAnimationsLabel}"
                                     IsChecked="{Binding EnableAnimations}"/>
                        </Grid>
                        
                        <!-- Window Settings Section -->
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="{Binding WindowSettingsLabel}" 
                                  Margin="0,24,0,8"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <CheckBox Grid.Row="0" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding RememberWindowPositionLabel}"
                                     IsChecked="{Binding RememberWindowPosition}"/>
                            
                            <CheckBox Grid.Row="1" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding MinimizeToTrayLabel}"
                                     IsChecked="{Binding MinimizeToTray}"/>
                            
                            <CheckBox Grid.Row="2" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding ShowNotificationsLabel}"
                                     IsChecked="{Binding ShowNotifications}"/>
                        </Grid>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Advanced Settings Tab -->
            <TabItem Header="{Binding AdvancedTabLabel}" Style="{StaticResource TabItemStyle}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        
                        <!-- Performance Settings Section -->
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="{Binding PerformanceSettingsLabel}"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding CacheSizeLabel}"/>
                            <Slider Grid.Row="0" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                   Minimum="10" Maximum="1000" Value="{Binding CacheSize}"
                                   TickFrequency="50" IsSnapToTickEnabled="True"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding MaxConcurrentRequestsLabel}"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                    Text="{Binding MaxConcurrentRequests, UpdateSourceTrigger=PropertyChanged}"/>
                            
                            <CheckBox Grid.Row="2" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding EnablePerformanceMonitoringLabel}"
                                     IsChecked="{Binding EnablePerformanceMonitoring}"/>
                        </Grid>
                        
                        <!-- Debug Settings Section -->
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="{Binding DebugSettingsLabel}" 
                                  Margin="0,24,0,8"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Style="{StaticResource SettingLabelStyle}" 
                                      Text="{Binding LogLevelLabel}"/>
                            <ComboBox Grid.Row="0" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     ItemsSource="{Binding AvailableLogLevels}"
                                     SelectedItem="{Binding SelectedLogLevel}"
                                     DisplayMemberPath="Name" SelectedValuePath="Code"/>
                            
                            <CheckBox Grid.Row="1" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding EnableDebugModeLabel}"
                                     IsChecked="{Binding EnableDebugMode}"/>
                            
                            <CheckBox Grid.Row="2" Grid.Column="1" Style="{StaticResource SettingControlStyle}"
                                     Content="{Binding EnableTelemetryLabel}"
                                     IsChecked="{Binding EnableTelemetry}"/>
                        </Grid>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
        </TabControl>
        
        <!-- Action Buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
            <Button Content="{Binding ResetButtonLabel}" Style="{StaticResource ActionButtonStyle}"
                   Command="{Binding ResetCommand}"/>
            <Button Content="{Binding SaveButtonLabel}" Style="{StaticResource PrimaryButtonStyle}"
                   Command="{Binding SaveCommand}"/>
            <Button Content="{Binding CloseButtonLabel}" Style="{StaticResource ActionButtonStyle}"
                   Command="{Binding CloseCommand}" Margin="8,0,0,0"/>
        </StackPanel>
        
    </Grid>
</Window>


